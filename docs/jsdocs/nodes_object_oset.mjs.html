<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: nodes/object/oset.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: nodes/object/oset.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * cnodes
 *
 * A representation-agnostic library to define and execute nodes based processes
 * License: MIT
 * Author: Marco Jacovone
 * Year: 2020-2021
 */

import { Node } from "../../core/node.mjs";
import {
  InputSocket,
  NextSocket,
  PrevSocket,
  OutputSocket,
} from "../../core/socket.mjs";
import { Types } from "../../core/type.mjs";

/**
 * This class implements a node to set a field
 * inside a object structure. If the field doesn't
 * previously exists, create it
 */
export class OSet extends Node {
  // Provide a node instance
  static instance = () => new OSet();

  /**
   * Construct a new Setvar node
   */
  constructor() {
    super("OSet");
    this.functional = false;
    this.inputs = [
      new InputSocket("Object", this, Types.OBJECT, 0),
      new InputSocket("Name", this, Types.STRING, 0),
      new InputSocket("Val", this, Types.ANY, 0),
    ];
    this.outputs = [new OutputSocket("Val", this, Types.ANY, "")];
    this.nexts = [new NextSocket("Out", this)];
    this.prev = new PrevSocket("In", this);
  }

  /**
   * Clone this node
   * @param {Function} factory The factory class function
   */
  clone(factory = OSet.instance) {
    return super.clone(factory);
  }

  /**
   * The process fmethod
   */
  async process() {
    await this.evaluateInputs();

    let fieldName = this.input("Name").value;
    let fieldVal = this.input("Val").value;
    let object = this.input("Object").value;

    if (object) {
      object[fieldName] = fieldVal;
    }

    this.output("Val").value = fieldVal;

    return this.getFlowResult(this.next("Out"));
  }
}

/**
 * This is the functional counterpart of the OSet node
 */
export class FOSet extends OSet {
  // Provide a node instance
  static instance = () => new FOSet();

  /**
   * Clone this node
   * @param {Function} factory The factory class function
   */
  clone(factory = FOSet.instance) {
    return super.clone(factory);
  }

  constructor() {
    super();
    this.functional = true;
    this.name = "FOSet";
    this.outputs = [new OutputSocket("Val", this, Types.OBJECT, {})];
    this.nexts = [];
    this.prev = null;
  }

  /**
   * The process fmethod
   */
  async process() {
    await this.evaluateInputs();

    let fieldName = this.input("Name").value;
    let fieldVal = this.input("Val").value;
    let object = this.input("Object").value;

    if (object) {
      object[fieldName] = fieldVal;
    }

    this.output("Val").value = object;
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AMap.html">AMap</a></li><li><a href="APush.html">APush</a></li><li><a href="AReduce.html">AReduce</a></li><li><a href="Call.html">Call</a></li><li><a href="Console.html">Console</a></li><li><a href="Enter.html">Enter</a></li><li><a href="Env.html">Env</a></li><li><a href="Exit.html">Exit</a></li><li><a href="FAConst.html">FAConst</a></li><li><a href="FAdd.html">FAdd</a></li><li><a href="FAGet.html">FAGet</a></li><li><a href="FALength.html">FALength</a></li><li><a href="FAMake.html">FAMake</a></li><li><a href="FAMap.html">FAMap</a></li><li><a href="FAReduce.html">FAReduce</a></li><li><a href="FCompare.html">FCompare</a></li><li><a href="FConcat.html">FConcat</a></li><li><a href="FDiv.html">FDiv</a></li><li><a href="FEqual.html">FEqual</a></li><li><a href="FGetvar.html">FGetvar</a></li><li><a href="FGT.html">FGT</a></li><li><a href="FGTE.html">FGTE</a></li><li><a href="FIf.html">FIf</a></li><li><a href="FIsNull.html">FIsNull</a></li><li><a href="FIsUndefined.html">FIsUndefined</a></li><li><a href="FlowSocket.html">FlowSocket</a></li><li><a href="FLT.html">FLT</a></li><li><a href="FLTE.html">FLTE</a></li><li><a href="FMod.html">FMod</a></li><li><a href="FMul.html">FMul</a></li><li><a href="FNConst.html">FNConst</a></li><li><a href="FNotEqual.html">FNotEqual</a></li><li><a href="FOBreak.html">FOBreak</a></li><li><a href="FOMake.html">FOMake</a></li><li><a href="For.html">For</a></li><li><a href="FOSet.html">FOSet</a></li><li><a href="FSConst.html">FSConst</a></li><li><a href="FSqrt.html">FSqrt</a></li><li><a href="FTofixed.html">FTofixed</a></li><li><a href="Getvar.html">Getvar</a></li><li><a href="If.html">If</a></li><li><a href="InputSocket.html">InputSocket</a></li><li><a href="Log.html">Log</a></li><li><a href="NextSocket.html">NextSocket</a></li><li><a href="Node.html">Node</a></li><li><a href="OSet.html">OSet</a></li><li><a href="OutputSocket.html">OutputSocket</a></li><li><a href="PrevSocket.html">PrevSocket</a></li><li><a href="Program.html">Program</a></li><li><a href="Result.html">Result</a></li><li><a href="Setvar.html">Setvar</a></li><li><a href="Socket.html">Socket</a></li><li><a href="ValueSocket.html">ValueSocket</a></li><li><a href="Wait.html">Wait</a></li><li><a href="While.html">While</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Comparision">Comparision</a></li><li><a href="global.html#Types">Types</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Fri Apr 09 2021 07:40:29 GMT+0200 (Ora legale dellâ€™Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
